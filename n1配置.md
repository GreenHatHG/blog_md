---
title: n1配置
date: 2018-11-24 17:51:43
tags:
---

某讯日常倒闭

<!-- more -->

# 配置`Sakura Frp`

配置`frp`内网穿透，今天卡在开机自启这里了，后来查了下`linux`启动顺序才知道错处

参考：

[centos 6和centos 7启动顺序](http://blog.51cto.com/net881004/2073150)

[linux添加开机自启动脚本示例详解](https://blog.csdn.net/fireroll/article/details/15503463)‘

[Linux 将 Sakura Frp 设置为服务，开机自动启动](Linux 将 Sakura Frp 设置为服务，开机自动启动)

1. 获取`Sakura Frp arm`版并且解压

```shell
wget https://s1.tcotp.cn/cdn/SakuraFrpClient-2.3/Sakura_frpc_linux_arm.tar.gz 
tar -xvf Sakura_frpc_linux_arm.tar.gz
```

2. 在`/etc/init.d`目录下放个启动无线网卡的脚本`dhd`并且赋予权限

```shell
vim /etc/init.d/dhd
```

`dhd`内容：

```shell
#!/bin/sh
modprobe dhd
```

然后

```shell
chmod +x dhd
```

3. 然后在`/etc/systemd/system`目录下放关于`frp`的`service`文件

```shell
vim /etc/systemd/system/sakurafrp.service
```

其内容:

```shell
[Unit]
Description=Sakura Frp Client
Wants=network-online.target
After=network-online.target
[Service]
User=root
WorkingDirectory=/root #你的客户端储存位置
LimitNOFILE=4096
PIDFile=/var/run/sakurafrp/client.pid
ExecStart=/root/Sakura_frpc_linux_arm --su=test --sp=test --sid=2 
#执行命令su:用户名，sp:密码,sid:节点序号
Restart=on-failure
StartLimitInterval=600
[Install]
WantedBy=multi-user.target
```

接着重新加载`service`文件还有设置开机自启

```shell
systemctl daemon-reload
systemctl start sakurafrp
systemctl enable sakurafrp
```

